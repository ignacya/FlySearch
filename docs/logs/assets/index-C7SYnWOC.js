import{u as Be,V as Ae,m as $e,R as ze,a as Y,b as ye,c as J,d as Ue,e as ge,f as be,g as Ve,h as De,i as Ce,j as Fe,k as Le,l as Ne,n as Oe,o as Ge,p as He,_ as Me,q as qe,r as Je,s as oe,t as Ke,v as ie,w as O,x as G,y as H,z as ue,A as re,B as de,C as ce}from"./VSelect-Dyp1Zb-l.js";import{g as j,p as R,i as Q,u as B,c as t,m as L,w as _e,v as Ye,a as Qe,b as C,r as We,d as Xe,I as ve,e as M,f as Ze,h as W,j as ea,t as V,k as X,l as aa,n as I,s as ta,o as na,q as la,x as sa,y as oa,z as ke,A as ia,B as ua,C as fe,D as w,E as c,F as i,G as p,H as k,V as ra,J as P,K as b,L as T,M as me,N as pe,O as xe,P as da,Q as ca}from"./index-Bh26f1L6.js";const F=Symbol.for("vuetify:v-expansion-panel"),Pe=R({...L(),...$e()},"VExpansionPanelText"),K=j()({name:"VExpansionPanelText",props:Pe(),setup(e,v){let{slots:n}=v;const l=Q(F);if(!l)throw new Error("[Vuetify] v-expansion-panel-text needs to be placed inside v-expansion-panel");const{hasContent:r,onAfterLeave:u}=Be(e,l.isSelected);return B(()=>t(Ae,{onAfterLeave:u},{default:()=>{var m;return[_e(t("div",{class:["v-expansion-panel-text",e.class],style:e.style},[n.default&&r.value&&t("div",{class:"v-expansion-panel-text__wrapper"},[(m=n.default)==null?void 0:m.call(n)])]),[[Ye,l.isSelected.value]])]}})),{}}}),Ie=R({color:String,expandIcon:{type:ve,default:"$expand"},collapseIcon:{type:ve,default:"$collapse"},hideActions:Boolean,focusable:Boolean,static:Boolean,ripple:{type:[Boolean,Object],default:!1},readonly:Boolean,...L(),...Xe()},"VExpansionPanelTitle"),he=j()({name:"VExpansionPanelTitle",directives:{Ripple:ze},props:Ie(),setup(e,v){let{slots:n}=v;const l=Q(F);if(!l)throw new Error("[Vuetify] v-expansion-panel-title needs to be placed inside v-expansion-panel");const{backgroundColorClasses:r,backgroundColorStyles:u}=Y(e,"color"),{dimensionStyles:m}=Qe(e),x=C(()=>({collapseIcon:e.collapseIcon,disabled:l.disabled.value,expanded:l.isSelected.value,expandIcon:e.expandIcon,readonly:e.readonly})),h=C(()=>l.isSelected.value?e.collapseIcon:e.expandIcon);return B(()=>{var y;return _e(t("button",{class:["v-expansion-panel-title",{"v-expansion-panel-title--active":l.isSelected.value,"v-expansion-panel-title--focusable":e.focusable,"v-expansion-panel-title--static":e.static},r.value,e.class],style:[u.value,m.value,e.style],type:"button",tabindex:l.disabled.value?-1:void 0,disabled:l.disabled.value,"aria-expanded":l.isSelected.value,onClick:e.readonly?void 0:l.toggle},[t("span",{class:"v-expansion-panel-title__overlay"},null),(y=n.default)==null?void 0:y.call(n,x.value),!e.hideActions&&t(ye,{defaults:{VIcon:{icon:h.value}}},{default:()=>{var g;return[t("span",{class:"v-expansion-panel-title__icon"},[((g=n.actions)==null?void 0:g.call(n,x.value))??t(J,null,null)])]}})]),[[We("ripple"),e.ripple]])}),{}}}),Se=R({title:String,text:String,bgColor:String,...Ce(),...De(),...Ve(),...M(),...Ie(),...Pe()},"VExpansionPanel"),va=j()({name:"VExpansionPanel",props:Se(),emits:{"group:selected":e=>!0},setup(e,v){let{slots:n}=v;const l=Ue(e,F),{backgroundColorClasses:r,backgroundColorStyles:u}=Y(e,"bgColor"),{elevationClasses:m}=ge(e),{roundedClasses:x}=be(e),h=C(()=>(l==null?void 0:l.disabled.value)||e.disabled),y=C(()=>l.group.items.value.reduce((_,f,$)=>(l.group.selected.value.includes(f.id)&&_.push($),_),[])),g=C(()=>{const _=l.group.items.value.findIndex(f=>f.id===l.id);return!l.isSelected.value&&y.value.some(f=>f-_===1)}),A=C(()=>{const _=l.group.items.value.findIndex(f=>f.id===l.id);return!l.isSelected.value&&y.value.some(f=>f-_===-1)});return Ze(F,l),B(()=>{const _=!!(n.text||e.text),f=!!(n.title||e.title),$=he.filterProps(e),q=K.filterProps(e);return t(e.tag,{class:["v-expansion-panel",{"v-expansion-panel--active":l.isSelected.value,"v-expansion-panel--before-active":g.value,"v-expansion-panel--after-active":A.value,"v-expansion-panel--disabled":h.value},x.value,r.value,e.class],style:[u.value,e.style]},{default:()=>[t("div",{class:["v-expansion-panel__shadow",...m.value]},null),t(ye,{defaults:{VExpansionPanelTitle:{...$},VExpansionPanelText:{...q}}},{default:()=>{var z;return[f&&t(he,{key:"title"},{default:()=>[n.title?n.title():e.title]}),_&&t(K,{key:"text"},{default:()=>[n.text?n.text():e.text]}),(z=n.default)==null?void 0:z.call(n)]}})]})}),{groupItem:l}}}),fa=["default","accordion","inset","popout"],ma=R({flat:Boolean,...Le(),...aa(Se(),["bgColor","collapseIcon","color","eager","elevation","expandIcon","focusable","hideActions","readonly","ripple","rounded","tile","static"]),...X(),...L(),...M(),variant:{type:String,default:"default",validator:e=>fa.includes(e)}},"VExpansionPanels"),pa=j()({name:"VExpansionPanels",props:ma(),emits:{"update:modelValue":e=>!0},setup(e,v){let{slots:n}=v;const{next:l,prev:r}=Fe(e,F),{themeClasses:u}=W(e),m=C(()=>e.variant&&`v-expansion-panels--variant-${e.variant}`);return ea({VExpansionPanel:{bgColor:V(e,"bgColor"),collapseIcon:V(e,"collapseIcon"),color:V(e,"color"),eager:V(e,"eager"),elevation:V(e,"elevation"),expandIcon:V(e,"expandIcon"),focusable:V(e,"focusable"),hideActions:V(e,"hideActions"),readonly:V(e,"readonly"),ripple:V(e,"ripple"),rounded:V(e,"rounded"),static:V(e,"static")}}),B(()=>t(e.tag,{class:["v-expansion-panels",{"v-expansion-panels--flat":e.flat,"v-expansion-panels--tile":e.tile},u.value,m.value,e.class],style:e.style},{default:()=>{var x;return[(x=n.default)==null?void 0:x.call(n,{prev:r,next:l})]}})),{next:l,prev:r}}}),xa=R({app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...Oe(),...L(),...Ce(),...ia(),...Ve(),...M({tag:"footer"}),...X()},"VFooter"),ha=j()({name:"VFooter",props:xa(),setup(e,v){let{slots:n}=v;const l=I(),{themeClasses:r}=W(e),{backgroundColorClasses:u,backgroundColorStyles:m}=Y(V(e,"color")),{borderClasses:x}=Ne(e),{elevationClasses:h}=ge(e),{roundedClasses:y}=be(e),g=ta(32),{resizeRef:A}=na(f=>{f.length&&(g.value=f[0].target.clientHeight)}),_=C(()=>e.height==="auto"?g.value:parseInt(e.height,10));return la(()=>e.app,()=>{const f=sa({id:e.name,order:C(()=>parseInt(e.order,10)),position:C(()=>"bottom"),layoutSize:_,elementSize:C(()=>e.height==="auto"?void 0:_.value),active:C(()=>e.app),absolute:V(e,"absolute")});oa(()=>{l.value=f.layoutItemStyles.value})}),B(()=>t(e.tag,{ref:A,class:["v-footer",r.value,u.value,x.value,h.value,y.value,e.class],style:[m.value,e.app?l.value:{height:ke(e.height)},e.style]},n)),{}}}),ya=R({fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],hover:Boolean,...L(),...He(),...M(),...X()},"VTable"),ga=j()({name:"VTable",props:ya(),setup(e,v){let{slots:n,emit:l}=v;const{themeClasses:r}=W(e),{densityClasses:u}=Ge(e);return B(()=>t(e.tag,{class:["v-table",{"v-table--fixed-height":!!e.height,"v-table--fixed-header":e.fixedHeader,"v-table--fixed-footer":e.fixedFooter,"v-table--has-top":!!n.top,"v-table--has-bottom":!!n.bottom,"v-table--hover":e.hover},r.value,u.value,e.class],style:e.style},{default:()=>{var m,x,h;return[(m=n.top)==null?void 0:m.call(n),n.default?t("div",{class:"v-table__wrapper",style:{height:ke(e.height)}},[t("table",null,[n.default()])]):(x=n.wrapper)==null?void 0:x.call(n),(h=n.bottom)==null?void 0:h.call(n)]}})),{}}}),ba={class:"toolbar-center"},Va={class:"d-flex align-center"},Ca={key:0,class:"text-medium-emphasis"},_a={key:1},ka={class:"ml-2"},Pa={key:0,class:"text-medium-emphasis mt-2"},Ia={key:0,class:"d-flex flex-column align-center mr-3"},Sa={key:0},Ea={key:1},wa={key:2},Ta={class:"d-flex align-center justify-center fill-height"},ja={key:3,class:"d-flex flex-column align-center ml-3"},Ra={key:0,class:"text-medium-emphasis mt-2"},Ba={class:"d-flex align-center justify-center fill-height"},Aa={class:"text-caption"},$a={__name:"index",setup(e){Q("axios");const v="https://io.pardyl.com/flysearchlogs",n=I([]),l=I([]),r=I(""),u=I(""),m=I(!1),x=I(!1),h=I([]),y=I([]),g=I(null),A=new Date().getFullYear(),_=C(()=>{const s=h.value.find(([a])=>a==="passed_object_name");return s?s[1]:"—"}),f=C(()=>h.value.filter(([s])=>s!=="passed_object_name"));function $(){m.value=!0;{fetch(v+"/index.json").then(s=>s.json()).then(s=>{n.value=(s.runs||[]).map(a=>a.name)}).catch(console.error).finally(()=>m.value=!1);return}}function q(s){if(!s){l.value=[],u.value="";return}x.value=!0;{fetch(v+"/index.json").then(a=>a.json()).then(a=>{const o=(a.runs||[]).find(d=>d.name===s);l.value=o?o.episodes:[],u.value&&(z(s,u.value),Z(s,u.value),ee(s,u.value))}).catch(console.error).finally(()=>x.value=!1);return}}function z(s,a){if(h.value=[],!s||!a)return;const o=v+`/${encodeURIComponent(s)}/${encodeURIComponent(a)}/scenario_params.json`;fetch(o).then(d=>d.json()).then(d=>{const S=Object.entries(d||{});S.sort((N,E)=>N[0].localeCompare(E[0])),h.value=S}).catch(d=>{console.error(d),h.value=[]})}function Ee(s){return!s||typeof s!="string"?"user":s.toLowerCase().includes("assistant")?"assistant":"user"}function Z(s,a){if(y.value=[],!s||!a)return;const o=v+`/${encodeURIComponent(s)}/${encodeURIComponent(a)}/conversation.json`;fetch(o).then(d=>d.json()).then(d=>{const S=Array.isArray(d)?d:[];let N=0;y.value=S.reduce((E,ne)=>{const le=Ee(ne[0]),U=ne[1];if(U==="image"){const Re=N;return N+=1,E.push({role:le,text:U,isImage:!0,imageIndex:Re}),E}const D=typeof U=="string"?U.replace(/^[\r\n]+|[\r\n]+$/g,""):String(U);if(/^\s*Image\s+\d+:\s*$/.test(D))return E;const se=D.length>500,je=se?D.slice(0,500)+"…":D;return E.push({role:le,text:D,isImage:!1,isLong:se,expanded:!1,preview:je}),E},[])}).catch(d=>{console.error(d),y.value=[]})}function ee(s,a){if(g.value=null,!(!s||!a)){const o=v+`/${encodeURIComponent(s)}/${encodeURIComponent(a)}/success.json`;fetch(o).then(d=>{if(!d.ok)throw new Error("missing success.json");return d.json()}).then(d=>{g.value=!!d}).catch(()=>{g.value=null});return}}function we(s,a){return v+`/${encodeURIComponent(s)}/${encodeURIComponent(a)}/preview.jpg`}function Te(s,a,o){return!s||!a?"":v+`/${encodeURIComponent(s)}/${encodeURIComponent(a)}/${o}.jpg`}function ae(){u.value="",h.value=[],y.value=[],g.value=null,q(r.value)}function te(){z(r.value,u.value),Z(r.value,u.value),ee(r.value,u.value)}return ua(()=>{$()}),fe(r,(s,a)=>{s!==a&&ae()}),fe(u,(s,a)=>{s!==a&&te()}),(s,a)=>(c(),w(ca,null,{default:i(()=>[t(qe,{elevation:"1"},{default:i(()=>[t(Je,null,{default:i(()=>a[2]||(a[2]=[k("FlySearch Analytics")])),_:1}),p("div",ba,[p("div",Va,[t(oe,{modelValue:r.value,"onUpdate:modelValue":[a[0]||(a[0]=o=>r.value=o),ae],items:n.value,label:"Run",variant:"underlined",class:"mt-5 mr-6",density:"compact",loading:m.value,disabled:m.value||n.value.length===0,width:"240"},null,8,["modelValue","items","loading","disabled"]),t(oe,{modelValue:u.value,"onUpdate:modelValue":[a[1]||(a[1]=o=>u.value=o),te],items:l.value,label:"Episode",variant:"underlined",class:"mt-5",density:"compact",loading:x.value,disabled:x.value||l.value.length===0,width:"240"},null,8,["modelValue","items","loading","disabled"])])])]),_:1}),t(ra,null,{default:i(()=>[t(Ke,null,{default:i(()=>[!r.value||!u.value?(c(),w(ie,{key:0,type:"info",variant:"tonal",class:"mt-4"},{default:i(()=>a[3]||(a[3]=[k(" Please select a Run and an Episode to view details. ")])),_:1})):P("",!0),h.value.length>0?(c(),w(O,{key:1,variant:"outlined",class:"mt-4"},{default:i(()=>[t(G,null,{default:i(()=>a[4]||(a[4]=[k("Scenario params")])),_:1}),t(H,null,{default:i(()=>[h.value.length===0?(c(),b("div",Ca,"No parameters to display.")):(c(),b("div",_a,[p("div",null,[a[5]||(a[5]=p("span",{class:"text-medium-emphasis"},"Object name:",-1)),p("span",ka,T(_.value),1)]),t(pa,{class:"mt-3",density:"compact"},{default:i(()=>[t(va,{class:"more-params",density:"compact"},{title:i(()=>a[6]||(a[6]=[p("span",{class:"text-caption text-medium-emphasis"},"More parameters",-1)])),default:i(()=>[t(K,null,{default:i(()=>[t(ga,{density:"compact"},{default:i(()=>[a[7]||(a[7]=p("thead",null,[p("tr",null,[p("th",{class:"text-left"},"Key"),p("th",{class:"text-left"},"Value")])],-1)),p("tbody",null,[(c(!0),b(me,null,pe(f.value,([o,d],S)=>(c(),b("tr",{key:o+"_"+S},[p("td",null,T(o),1),p("td",null,T(d),1)]))),128))])]),_:1}),f.value.length===0?(c(),b("div",Pa,"No additional parameters.")):P("",!0)]),_:1})]),_:1})]),_:1})]))]),_:1})]),_:1})):P("",!0),y.value.length>0?(c(),w(O,{key:2,variant:"outlined",class:"mt-4"},{default:i(()=>[t(G,null,{default:i(()=>a[8]||(a[8]=[k("Conversation")])),_:1}),t(H,null,{default:i(()=>[(c(!0),b(me,null,pe(y.value,(o,d)=>(c(),b("div",{key:d,class:xe(["d-flex mb-3 align-center",o.role==="assistant"?"justify-start":"justify-end"])},[o.role==="assistant"?(c(),b("div",Ia,[t(ue,{size:"48"},{default:i(()=>[t(J,{icon:"mdi-robot",size:"32"})]),_:1}),a[9]||(a[9]=p("div",{class:"text-caption mt-n1"},"Agent",-1))])):P("",!0),o.isImage?(c(),b("div",wa,[t(de,{src:Te(r.value,u.value,o.imageIndex),width:"500",height:"500",class:"rounded",cover:""},{placeholder:i(()=>[p("div",Ta,[t(ce,{color:"grey",indeterminate:""})])]),_:2},1032,["src"])])):(c(),b("div",{key:1,class:xe(["bubble",o.role])},[o.isLong&&!o.expanded?(c(),b("div",Sa,[k(T(o.preview)+" ",1),t(re,{variant:"text",size:"x-small",class:"ml-2",onClick:S=>o.expanded=!0},{default:i(()=>a[10]||(a[10]=[k("Show more")])),_:2},1032,["onClick"])])):(c(),b("div",Ea,[k(T(o.text)+" ",1),o.isLong?(c(),w(re,{key:0,variant:"text",size:"x-small",class:"ml-2",onClick:S=>o.expanded=!1},{default:i(()=>a[11]||(a[11]=[k("Show less")])),_:2},1032,["onClick"])):P("",!0)]))],2)),o.role==="user"?(c(),b("div",ja,[t(ue,{size:"48"},{default:i(()=>[t(J,{icon:"mdi-quadcopter",size:"32"})]),_:1}),a[12]||(a[12]=p("div",{class:"text-caption mt-n1"},"Benchmark",-1))])):P("",!0)],2))),128)),y.value.length===0?(c(),b("div",Ra,"No conversation to display.")):P("",!0)]),_:1})]),_:1})):P("",!0),g.value!==null?(c(),w(O,{key:3,variant:"outlined",class:"mt-4"},{default:i(()=>[t(G,null,{default:i(()=>a[13]||(a[13]=[k("Result")])),_:1}),t(H,null,{default:i(()=>[t(ie,{type:g.value?"success":"error",variant:"tonal"},{default:i(()=>[k(T(g.value?"Target located":"Mission failed"),1)]),_:1},8,["type"])]),_:1})]),_:1})):P("",!0),r.value&&u.value?(c(),w(O,{key:4,variant:"outlined",class:"mt-4"},{default:i(()=>[t(G,null,{default:i(()=>a[14]||(a[14]=[k("Trajectory preview")])),_:1}),t(H,null,{default:i(()=>[t(de,{src:we(r.value,u.value),"max-width":"1000","max-height":"700",class:"rounded preview-img",contain:""},{placeholder:i(()=>[p("div",Ba,[t(ce,{color:"grey",indeterminate:""})])]),_:1},8,["src"])]),_:1})]),_:1})):P("",!0)]),_:1})]),_:1}),t(ha,{app:"",elevation:"1",class:"justify-center"},{default:i(()=>[p("div",Aa,"© "+T(da(A))+" — FlySearch authors",1)]),_:1})]),_:1}))}},Da=Me($a,[["__scopeId","data-v-257f7787"]]);export{Da as default};
